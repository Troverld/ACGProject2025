任务如下：


### Topic 1: Image Rendering

In this section, you are required to implement a renderer, which can be either hardware-based (GPU) or software-based (CPU). The goal is to produce a static image. Note that a path-tracing renderer is required, as rasterization-based renderers will not be accepted. Also, there is a framework that you can choose to use it or not (github.com/LazyJazzDev/Sparks). The functionalities you need to implement are as follows:

**Core Requirements:**

*   **Base**: Implement a path tracing algorithm that correctly handles **diffuse** and **specular** materials. (basic)
*   **Scene creation**: Build a custom scene with aesthetic considerations, using geometry that you create from scratch or find online (ensure the source is credited). (basic, tidiness and attractiveness 1pt)
*   **Acceleration structure**: Implement an acceleration structure such as BVH (Bounding Volume Hierarchy). This is not required for hardware-based renderers, as the acceleration structure is built-in in that case. (basic, Surface Area Heuristic or another advanced algorithm 2pts)

**Advanced Features (Optional):**

*   **Material:** Create a (non-trivial) custom material. Options include:
    *   Transmissive material (basic)
    *   Principled BSDF (2pts)
    *   Multi-layer material (2pts)
    *   Rendering of fur, hair, skin, etc. (2pts)

*   **Texture:** Create your own (non-trivial) texture with proper texture mapping. Options include:
    *   Color texture (basic)
    *   Normal map, height map, attribute map, or any functional texture mapping (1pt for each, up to 2pts)
    *   Implement an adaptive mipmap algorithm (2pts)

*   **Importance Sampling:** Use more advanced sampling algorithms for path tracing. (Importance sampling with Russian Roulette, multiple importance sampling 2pts)

*   **Volumetric Rendering:** Options include:
    *   Subsurface scattering (2pts)
    *   Homogeneous volume rendering (1pt)
    *   Inhomogeneous volume rendering (1pt)
    *   Channel-independent subsurface scattering (1pt)
    *   Volumetric emission (1pt)
    *   Volumetric alpha shadow (2pts)

*   **Special Visual Effects:** Options include:
    *   Motion blur, depth of field (basic)
    *   Alpha shadow (basic)
    *   Cartoon style rendering (2pts)
    *   Chromatic dispersion (2pts)

*   **Lighting:** Options include:
    *   Point light and area light (basic)
    *   Environment lighting with HDR, such as skybox (2pts)

*   **Anti-aliasing:** Implement an anti-aliasing algorithm (basic)

*   **Simulation-based content creation:** Up to 2pts

目前的代码结构规划如下（可能改动）：

MyPathTracer/
├── CMakeLists.txt          // 构建系统
├── external/               // 第三方库
│   ├── stb_image_write.h   // 用于输出图片
│   └── tiny_obj_loader.h   // (可选) 用于加载外部模型
├── src/
│   ├── main.cpp            // 程序入口
│   ├── core/               // 核心数学与基础数据结构
│   │   ├── ray.hpp         // 光线定义
│   │   └── utils.hpp       // 随机数生成、常量定义
│   ├── scene/              // 场景定义
│   │   ├── scene.hpp       // 管理所有物体和灯光
│   │   ├── object.hpp      // 物体基类
│   │   ├── sphere.hpp      // 球体 (基础几何)
│   │   ├── triangle.hpp    // 三角形 (网格几何)
│   │   ├── mesh.hpp        // 三角形网格 (加载 .obj)
│   │   └── camera.hpp      // 相机模型 (负责生成光线、抗锯齿)
│   ├── accel/              // 加速结构
│   │   ├── AABB.hpp        // 轴对齐包围盒
│   │   └── BVH.hpp         // 核心：BVH 构建与遍历
│   ├── material/           // 材质系统
│   │   ├── material.hpp    // 材质基类
│   │   └── BSDF.hpp        // 具体材质实现 (Diffuse, Specular, Glass...)
│   └── renderer/           // 渲染管线
│       └── integrator.hpp  // 路径追踪核心算法

目前的约定如下：

所有的定义前面都要有英文编写的接口介绍。

所有的文件和文件夹，如果不是某种简写（如 AABB），都要小写。

所有的自定义类型都要遵照 Camel Case。所有的自定义函数都要遵照 Snake Case。

这份文件应该是编写整个项目的核心指导思想。